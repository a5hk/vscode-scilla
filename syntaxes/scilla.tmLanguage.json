{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "Scilla",
  "patterns": [
    {
      "include": "#types"
    },
    {
      "include": "#libraries"
    },
    {
      "include": "#constants"
    },
    {
      "include": "#comments"
    },
    {
      "include": "#strings"
    },
    {
      "include": "#functions"
    },
    {
      "include": "#contract"
    },
    {
      "include": "#numbers"
    },
    {
      "include": "#function_call"
    },
    {
      "include": "#punctuations"
    },
    {
      "include": "#keywords"
    }
  ],
  "repository": {
    "keywords": {
      "patterns": [
        {
          "name": "keyword.control.scilla",
          "match": "\\b(match)\\b"
        },
        {
          "name": "keyword.scilla",
          "match": "\\b(accept|as|builtin|catch|contract|delete|Emp|end|event|exists|field|forall|fun|let|library|in|import|Map|match|of|procedure|scilla_version|send|tfun|throw|transition|try|with)\\b"
        },
        {
          "name": "keyword.operator.scilla",
          "match": "(=>|=|:=|<-|\\|)"
        }
      ]
    },
    "types": {
      "patterns": [
        {
          "name": "support.type.scilla",
          "match": "\\b(Int32|Int64|Int128|Int256|Uint32|Uint64|Uint128|Uint256|String|BNum|Message|Event|ByStr|ByStr20|ByStr32|ByStr64|Bool|List|Pair|Nat|Nil|None|Succ|Zero|Cons|Some)\\b"
        },
        {
          "begin": "\\bOption\\s*",
          "end": "(?!\\G)",
          "beginCaptures": {
            "0": { "name": "support.type.scilla" }
          },
          "patterns": [
            {
              "include": "$self"
            },
            {
              "name": "storage.type.scilla",
              "match": "[A-Z][a-zA-Z0-9_]*"
            }
          ]
        },
        {
          "begin": "\\{",
          "end": "\\}",
          "beginCaptures": {
            "0": { "name": "punctuation.scilla" }
          },
          "endCaptures": {
            "0": { "name": "punctuation.scilla" }
          },
          "patterns": [
            {
              "include": "$self"
            },
            {
              "name": "storage.type.scilla",
              "match": "[A-Z][a-zA-Z0-9_]*"
            }
          ]
        },
        {
          "begin": "\\b(type)\\b\\s*",
          "end": "([A-Z][a-zA-Z0-9_]*)",
          "beginCaptures": {
            "1": { "name": "keyword.scilla" }
          },
          "endCaptures": {
            "0": { "name": "storage.type.scilla" }
          }
        },
        {
          "begin": "\\b(of)\\s*",
          "end": "$",
          "beginCaptures": {
            "1": { "name": "keyword.scilla" }
          },
          "patterns": [
            {
              "include": "$self"
            },
            {
              "name": "storage.type.scilla",
              "match": "[A-Z][a-zA-Z0-9_]*"
            }
          ]
        }
      ]
    },
    "libraries": {
      "patterns": [
        {
          "name": "support.other.namespace.scilla",
          "match": "\\b(BoolUtils|IntUtils|ListUtils|NatUtils|PairUtils)\\b"
        },
        {
          "begin": "\\b(library|import)\\b\\s*",
          "end": "([A-Z][a-zA-Z0-9_]*)",
          "beginCaptures": {
            "1": { "name": "keyword.scilla" }
          },
          "endCaptures": {
            "0": { "name": "entity.name.namespace.scilla" }
          }
        }
      ]
    },
    "variables": {
      "patterns": [
        {
          "name": "support.variable.scilla",
          "match": "\\b(_amount|_sender|_recipient|_tag|_eventname|_this_address|_creation_block|_origin|_balance)\\b"
        }
      ]
    },
    "constants": {
      "patterns": [
        {
          "name": "support.constant.scilla",
          "match": "\\b(False|True|_amount|_sender|_recipient|_tag|_eventname|_this_address|_creation_block|_origin|_balance)\\b"
        }
      ]
    },
    "comments": {
      "name": "comment.block.parenthesis.scilla",
      "begin": "\\(\\*",
      "end": "\\*\\)",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.comment.scilla" }
      },
      "endCaptures": {
        "0": { "name": "punctuation.definition.comment.scilla" }
      }
    },
    "strings": {
      "name": "string.quoted.double.scilla",
      "begin": "\"",
      "end": "\"",
      "patterns": [
        {
          "name": "constant.character.escape.scilla",
          "match": "\\\\."
        }
      ]
    },
    "punctuations": {
      "patterns": [
        {
          "name": "punctuation.scilla",
          "match": ",|;|\\(|\\)|\\{|\\}|\\[|\\]|:"
        }
      ]
    },
    "functions": {
      "patterns": [
        {
          "begin": "\\b(transition|procedure)\\b\\s*([a-zA-Z][a-zA-Z0-9_]*)\\s*",
          "end": "(?<=\\))",
          "beginCaptures": {
            "1": { "name": "keyword.scilla" },
            "2": { "name": "entity.name.function.scilla" }
          },
          "patterns": [
            {
              "include": "#parameters_list"
            }
          ]
        },
        {
          "begin": "\\b(let)\\s*([a-z][a-zA-Z0-9_]*)\\s*(=)\\s*(fun)\\s*",
          "end": "(?<=\\))",
          "beginCaptures": {
            "1": { "name": "keyword.scilla" },
            "2": { "name": "entity.name.function.scilla" },
            "3": { "name": "keyword.operator.scilla" },
            "4": { "name": "keyword.scilla" }
          },
          "patterns": [
            {
              "include": "#parameters_list"
            }
          ]
        },
        {
          "begin": "\\b(fun)\\s*",
          "end": "(?<=\\))",
          "beginCaptures": {
            "1": { "name": "keyword.scilla" }
          },
          "patterns": [
            {
              "include": "#parameters_list"
            }
          ]
        }
      ]
    },
    "function_call": {
      "patterns": [
        {
          "match": "\\b(builtin)\\b\\s*([a-z][a-zA-Z0-9_]*)",
          "captures": {
            "1": { "name": "keyword.scilla" },
            "2": { "name": "support.function.scilla" }
          }
        }
      ]
    },
    "parameters_list": {
      "begin": "\\(",
      "end": "\\)",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.parameters.begin.scilla" }
      },
      "endCaptures": {
        "0": { "name": "punctuation.definition.parameters.end.scilla" }
      },
      "patterns": [
        {
          "include": "#parameters"
        }
      ]
    },
    "parameters": {
      "begin": "([a-zA-Z][a-zA-Z0-9_]*)\\s*(:)\\s*",
      "end": "(?!\\G)",
      "beginCaptures": {
        "1": { "name": "variable.parameter.scilla" },
        "2": { "name": "punctuation.scilla" }
      },
      "patterns": [
        {
          "include": "#types"
        },
        {
          "name": "storage.type.scilla",
          "match": "[A-Z][a-zA-Z0-9_]*"
        },
        {
          "include": "$self"
        }
      ]
    },
    "contract": {
      "begin": "\\b(contract)\\b\\s*([A-Z][a-zA-Z0-9_]*)\\b\\s*",
      "end": "(?<=\\))",
      "beginCaptures": {
        "1": { "name": "keyword.scilla" },
        "2": { "name": "entity.name.class" }
      },
      "patterns": [
        {
          "include": "#parameters_list"
        }
      ]
    },
    "numbers": {
      "match": "\\s*(\\-?)\\b([0-9]+)\\b",
      "captures": {
        "1": { "name": "keyword.operator.arithmetic.scilla" },
        "2": { "name": "constant.numeric.scilla" }
      }
    }
  },
  "scopeName": "source.scilla"
}
